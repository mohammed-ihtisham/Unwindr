---
timestamp: 'Thu Nov 06 2025 22:58:52 GMT-0500 (Eastern Standard Time)'
parent: '[[../20251106_225852.27b39b7d.md]]'
content_id: 669665179387e05810895a89a6707a047c1bb4030848e8fd757ba79a8324f8a1
---

# UserAuth Concept

[text](../../../context/design/brainstorming/questioning.md/steps/response.b80891d5.md)

concept UserAuth \[User]
purpose authenticate users
principle users must register and log in before contributing

state
a set of Users with
an \_id Id                   // Added explicit userId
a username String
a passwordHash String

a set of activeSessions with
a sessionToken String
an \_id Id

actions
registerUser (username: String, password: String) : (userId: Id | Error)
requires username unique and password non-empty
effect creates a new user, returns userId on success or an Error on failure (e.g., username taken).

login (username: String, password: String) : (sessionToken: String | Error)
requires username exists and password matches
effect creates a new active session, returns a new unique sessionToken on success. Returns an Error (e.g., "Invalid credentials") on failure.

logout (sessionToken: String) : (success: Boolean)
requires sessionToken exists in activeSessions
effect removes the sessionToken from activeSessions, returns true on success, false otherwise.

getAuthenticatedUser (sessionToken: String) : (userProfile: {userId: Id, username: String} | null)
requires sessionToken is valid and exists in activeSessions
effect returns a subset of user information for the authenticated user, or null if sessionToken is invalid.
