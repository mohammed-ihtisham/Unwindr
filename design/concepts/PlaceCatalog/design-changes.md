# Design Changes to PlaceCatalog

The fundamental concept of the **PlaceCatalog** remains consistent with its original design, but several key refinements were made for functionality and maintainability. An `_id` field was added to support MongoDB integration, serving as a unique identifier for each catalog entry and enabling direct retrieval of place data. The system now primarily uses `userId` and `placeId` (both of type `Id`) instead of full `user` and `place` objects, simplifying relationships and optimizing queries. The **`verify_place`** method was revised to allow both verification and unverification of places, providing flexibility to correct accidental approvals.

When I started building the frontend, I quickly realized that Google Maps was way too expensive for my MVP budget. I had to switch to OpenStreetMap data through the Overpass API, and I decided that I should only focus on Cambridge, MA and Boston, MA as my starting point since getting all the data can take hours. This actually worked out well though, since it gave me a manageable amount of data to work with and was completely free, which was perfect for validating my MVP.

I changed my approach from seeding individual places to doing one big bulk initialization with the `seedPlaces()` method. This makes way more sense for provider data since I only need to run it once when I deploy. I also switched from storing latitude/longitude directly to using MongoDB's GeoJSON format with `Location` objects, which gives me much better performance for location-based queries thanks to MongoDB's built-in geospatial indexing.

Instead of having one method that returns everything, I split things up so `_getPlacesInArea()` just returns the IDs and `_getPlaceDetails()` gives you the full data. This works better for different use cases. I also added `bulkImportOSMPlaces()` for importing big GeoJSON files, `checkAreaCoverage()` to see if I need to seed an area, and made sure all my methods return proper error messages with the `| {error: string}` pattern.

I built in duplicate checking to keep my data clean and decided to start local before expanding to other areas. This whole process taught me that it's really important to check costs early in MVP planning, and that OpenStreetMap is actually a great free alternative to paid mapping services. Plus, doing bulk operations is way more efficient than adding places one by one when you're working with provider data.

As I finalized the MVP version of the app, I realized that I needed to simplify the PlaceCatalog concept even further. I removed all the bulk initialization methods like `bulkImportOSMPlaces()`, `seedPlaces()`, and `checkAreaCoverage()` because these are one-time setup actions that should be handled by scripts during deployment, not by the concept itself. The concept should focus on its core responsibility: allowing users to discover and retrieve place information, not managing data initialization.

I also removed the `addPlace()` and `updatePlace()` actions where users could contribute their own places. This was a deliberate decision to refactor the app to focus on discovery rather than contribution. In the early stages of the MVP, there simply aren't enough users to create a meaningful verification and moderation system for user-contributed places. It makes more sense to start with curated provider data and let users discover places rather than trying to manage user-generated content without the infrastructure to properly validate it. The `addPlace()` method still exists for testing and seeding purposes, but it's documented as internal-only and not exposed to end users. This keeps the concept lean and focused on what users actually need: finding and learning about places that already exist in the catalog.
